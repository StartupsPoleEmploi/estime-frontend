<div class="card card-body card-form card-form-style-3">
    <form [ngClass]="{'submitted':isRessourcesFinancieresFormSubmitted}" #vosRessourcesFinancieresForm="ngForm">
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireASS()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-allocation-journaliere-net-ass">
                    * Montant de votre allocation journalière ASS
                    <button id="infobulle-allocation-ass" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_allocation_ass" aria-label="Où trouver le montant de votre ASS ?"
                        (click)="modalService.openModalOnEvent($event, modalAllocationASSTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="input-allocation-journaliere-net-ass" name="allocationJournaliereNetASS"
                        aria-label="Montant de votre ASS journalière nette" type="text"
                        data-testid="input-allocation-journaliere-net-ass"
                        pattern="{{controleChampFormulaireService.REGEX_DECIMAL}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForDecimal($event)" min="0"
                        maxlength="5" class="form-control d-inline"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet == 0 || this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet > this.controleChampFormulaireService.MONTANT_ASS_JOURNALIER_MAX)}"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet"
                        required placeholder="Montant" inputmode="decimal" #allocationJournaliereNetASS="ngModel">
                    <app-text-with-euro-symbol message="/ jour"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet == 0 || this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationASS.allocationJournaliereNet > this.controleChampFormulaireService.MONTANT_ASS_JOURNALIER_MAX)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_JOURNALIER_ASS}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationJournaliereNetASS.touched)  && allocationJournaliereNetASS.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationJournaliereNetASS.touched)  && allocationJournaliereNetASS.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_2}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireASS()">
            <div class="row pb-3">
                <label class="label headline-4-typo">
                    * Date de votre ouverture de droits à l'ASS
                    <button id="infobulle-date-ouverture-ass" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_allocation_ass" aria-label="Où trouver votre date d'ouverture ASS ?"
                        (click)="modalService.openModalOnEvent($event, modalDateOuvertureASSTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row pb-3">
                <div class="col">
                    <app-date-inputs [dateSaisie]="dateDernierOuvertureDroitASS"
                        [isFormSubmitted]="isRessourcesFinancieresFormSubmitted">
                    </app-date-inputs>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireARE()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-salaire-journalier-reference-brut">
                    * Montant de votre salaire journalier brut de référence (SJR) pour l'ARE
                    <button id="infobulle-sjr-are" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_obtenir_ressources_are"
                        aria-label="Où trouver votre salaire journalier référence ARE ?"
                        (click)="modalService.openModalOnEvent($event, modalAllocationARETemplate, true)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="input-salaire-journalier-reference-brut" name="salaireJournalierReferenceBrut"
                        aria-label="Montant de votre salaire journalier de référence ARE" type="text"
                        data-testid="input-salaire-journalier-reference-are"
                        pattern="{{controleChampFormulaireService.REGEX_DECIMAL}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForDecimal($event)" min="0"
                        maxlength="6" class="form-control d-inline"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.salaireJournalierReferenceBrut && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.salaireJournalierReferenceBrut == 0 )}"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.salaireJournalierReferenceBrut"
                        required placeholder="Montant" inputmode="decimal" #salaireJournalierReferenceBrut="ngModel">
                    <app-text-with-euro-symbol></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.salaireJournalierReferenceBrut == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || salaireJournalierReferenceBrut.touched)  && salaireJournalierReferenceBrut.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || salaireJournalierReferenceBrut.touched)  && salaireJournalierReferenceBrut.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_2}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireARE()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-nombre-jours-restants">
                    * Nombre de jours d'allocation restants (reliquat) pour l'ARE
                    <button id="infobulle-nombre-jours-restants-are" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_obtenir_ressources_are"
                        aria-label="Où trouver votre nombre jours restants d'ARE ?"
                        (click)="modalService.openModalOnEvent($event, modalAllocationARETemplate, true)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="input-nombre-jours-restants" name="nombreJoursRestants"
                        aria-label="Nombre de jours restants ARE" type="text"
                        data-testid="input-nombre-jours-restants-are"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" min="0"
                        maxlength="5" class="form-control d-inline"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.nombreJoursRestants && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.nombreJoursRestants == 0)}"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.nombreJoursRestants"
                        required placeholder="Nombre" inputmode="numeric" #nombreJoursRestants="ngModel">
                    <span class="text-side-input d-inline body-2-typo">jours</span>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.nombreJoursRestants == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || nombreJoursRestants.touched)  && nombreJoursRestants.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || nombreJoursRestants.touched)  && nombreJoursRestants.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_ENTIER}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="afficherQuestionDegressiviteAre()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-allocation-journaliere-brut">
                    * Êtes-vous concerné.e par la dégressivité de l'ARE ?
                    <button id="infobulle-degressivite-are" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_degressivite_are"
                        aria-label="Qu'est ce que la degressivité de l'ARE ?"
                        (click)="modalService.openModalOnEvent($event, modalDegressiviteTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-check form-check-inline">
                        <input id="hasDegressiviteAreOui" name="hasDegressiviteAreOui"
                            attr.aria-label="Vous êtes concerné par la dégressivité de l'ARE"
                            data-testid="btn-has-degressivite-are-oui" type="radio" class="form-check-input"
                            [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.hasDegressiviteAre"
                            (click)="onClickButtonRadioHasDegressiviteAre(true)" required [value]="true"
                            #hasDegressiviteAre="ngModel" tag-action="clic_concerne_degressivite_are_oui"
                            (keyup)="handleKeyUpOnButtonRadioHasDegressiviteAre($event, true)">
                        <label class="form-check-label body-2-typo" for="hasDegressiviteAreOui">
                            oui
                        </label>
                    </div>
                    <div class="form-check form-check-inline ms-2">
                        <input id="hasDegressiviteAreNon" name="hasDegressiviteAreNon"
                            data-testid="btn-has-degressivite-are-non"
                            attr.aria-label="Vous n'êtes pas concerné par la dégressivité de l'ARE" type="radio"
                            class="form-check-input"
                            [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.hasDegressiviteAre"
                            [value]="false" (click)="onClickButtonRadioHasDegressiviteAre(false)" required
                            #hasDegressiviteAre="ngModel" tag-action="clic_concerne_degressivite_are_non"
                            (keyup)="handleKeyUpOnButtonRadioHasDegressiviteAre($event, false)">
                        <label class="form-check-label body-2-typo" for="hasDegressiviteAreNon">
                            non
                        </label>
                    </div>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted)  && hasDegressiviteAre.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="afficherQuestionTypeTauxDegressiviteAre()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-allocation-journaliere-brut">
                    * Je souhaite simuler le montant de mon allocation en cas de reprise d'emploi en :
                    <button id="infobulle-ma-situation-vous-percevez" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_taux_reduit_degressivite_are"
                        aria-label="Où trouver votre taux réduit de degressivité ARE ?"
                        (click)="modalService.openModalOnEvent($event, modalAllocationARETemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <button id="btn-taux-plein-degressivite-are" #tauxPleinDegressiviteAre="ngModel"
                        (click)="onClickCheckBoxTauxPlein($event)" name="tauxPleinDegressiviteAre"
                        aria-label="Vous souhaitez simuler le montant de votre allocation en taux plein"
                        [ngClass]="{'ms-1':!screenService.isExtraSmallScreen()}" class="radio-button-style-1"
                        data-testid="btn-taux-plein-degressivite-are" btnCheckbox tabindex="0"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.isTauxPlein"
                        (keyup)="handleKeyUpOnButtonTauxPlein($event)">
                        <span class="body-2-typo">
                            Taux plein (avant application de la dégressivité)
                        </span>
                    </button>
                    <button id="btn-taux-reduit-degressivite-are" #tauxReduitDegressiviteAre="ngModel"
                        (click)="onClickCheckBoxTauxReduit($event)" name="tauxReduitDegressiviteAre"
                        aria-label="Vous souhaitez simuler le montant de votre allocation en taux réduit"
                        [ngClass]="{'ms-1':!screenService.isExtraSmallScreen()}" class="radio-button-style-1"
                        data-testid="btn-taux-reduit-degressivite-are" btnCheckbox tabindex="0"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.isTauxReduit"
                        (keyup)="handleKeyUpOnButtonTauxReduit($event)">
                        <span class="body-2-typo">
                            Taux réduit (après application de la dégressivité)
                        </span>
                    </button>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="isRessourcesFinancieresFormSubmitted  && !isTauxDegressiviteAreSelectionne()">
                        {{controleChampFormulaireService.MESSAGE_SELECTION_TAUX_DEGRESSIVITE_ARE}}
                    </span>
                </div>
            </div>
        </div>
        <div
            *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireARE() && ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.isTauxReduit === true">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-montant-allocation-journaliere-brut-taux-plein-are">
                    * Montant brut de votre allocation journalière à taux plein pour l’ARE
                    <button id="infobulle-ma-situation-vous-percevez" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_taux_reduit_degressivite_are"
                        aria-label="Où trouver votre montant brut d'allocation journalière à taux plein ?"
                        (click)="modalService.openModalOnEvent($event, modalAllocationARETemplate, true)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="input-montant-journalier-brut-taux-plein" name="allocationJournaliereBruteTauxPlein"
                        aria-label="Montant de votre allocation journalière brute taux plein ARE" type="text"
                        data-testid="input-montant-allocation-journaliere-brut-taux-plein-are"
                        pattern="{{controleChampFormulaireService.REGEX_DECIMAL}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForDecimal($event)" min="0"
                        maxlength="6" class="form-control d-inline"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBruteTauxPlein && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBruteTauxPlein == 0)}"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBruteTauxPlein"
                        required placeholder="Montant" inputmode="decimal"
                        #allocationJournaliereBruteTauxPlein="ngModel">
                    <app-text-with-euro-symbol message="/ jour"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBruteTauxPlein == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isMaSituationFormSubmitted || allocationJournaliereBruteTauxPlein.touched) && allocationJournaliereBruteTauxPlein.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isMaSituationFormSubmitted || allocationJournaliereBruteTauxPlein.touched) && allocationJournaliereBruteTauxPlein.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_2}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireARE()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="input-allocation-journaliere-brut">
                    * {{ getLibelleMontantBrutAllocationJournaliere() }}
                    <button
                        *ngIf="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.isTauxReduit === true"
                        id="infobulle-ma-situation-vous-percevez" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_taux_reduit_degressivite_are"
                        aria-label="Où trouver votre montant brut d'allocation journalière à taux réduit ?"
                        (click)="modalService.openModalOnEvent($event, modalTauxReduitTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="input-montant-journalier-brut" name="allocationJournaliereBrute"
                        aria-label="Montant de votre allocation journalière brute ARE" type="text"
                        data-testid="input-montant-allocation-journaliere-brut-are"
                        pattern="{{controleChampFormulaireService.REGEX_DECIMAL}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForDecimal($event)" min="0"
                        maxlength="6" class="form-control d-inline"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBrute && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBrute== 0)}"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBrute"
                        required placeholder="Montant" inputmode="decimal" #allocationJournaliereBrute="ngModel">
                    <app-text-with-euro-symbol message="/ jour"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE && (this.ressourcesFinancieresAvantSimulation.aidesPoleEmploi.allocationARE.allocationJournaliereBrute == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationJournaliereBrute.touched)  && allocationJournaliereBrute.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationJournaliereBrute.touched)  && allocationJournaliereBrute.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_2}}
                    </span>
                </div>
            </div>
        </div>
        <div
            *ngIf="deConnecteSituationFamilialeService.isCelibataireSansEnfant() && deConnecteBeneficiaireAidesService.isBeneficiaireRSA()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="allocationRSA">
                    * RSA (Revenu de Solidarité Active) perçu
                    <button id="infobulle-montant-rsa" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_rsa" aria-label="Où trouver votre montant de RSA ?"
                        (click)="modalService.openModalOnEvent($event, modalMontantRSATemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="allocationRSA" name="allocationRSA" aria-label="Montant de votre allocation RSA"
                        type="text" data-testid="input-allocation-mensuelle-net-rsa"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" min="0"
                        maxlength="8" class="form-control d-inline"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationRSA && this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationRSA == 0}"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesCAF.allocationRSA" required
                        placeholder="Montant" inputmode="numeric" #allocationRSA="ngModel">
                    <app-text-with-euro-symbol message="le mois dernier"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationRSA && (this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationRSA == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationRSA.touched)  && allocationRSA.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationRSA.touched)  && allocationRSA.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_ENTIER}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiaireAAH()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="allocationAAH">
                    * Allocation Adulte Handicapé (AAH) perçue
                    <button id="infobulle-montant-aah" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_aah" aria-label="Où trouver votre montant d'AAH ?"
                        (click)="modalService.openModalOnEvent($event, modalMontantAAHTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="allocationAAH" name="allocationAAH" aria-label="Montant de votre allocation AAH"
                        data-testid="input-allocation-mensuelle-aah"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" type="text"
                        maxlength="6" min="0"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationAAH && (this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationAAH == 0)}"
                        class="max-with-input-type-montant form-control d-inline" placeholder="Montant"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesCAF.allocationAAH " required
                        inputmode="numeric" #allocationAAH="ngModel">
                    <app-text-with-euro-symbol message="le mois dernier"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationAAH?.touched)  && allocationAAH?.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || allocationAAH?.touched)  && allocationAAH?.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_ENTIER}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationAAH && (this.ressourcesFinancieresAvantSimulation.aidesCAF.allocationAAH == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
            </div>
        </div>
        <div
            *ngIf="deConnecteSituationFamilialeService.isCelibataireSansEnfant() && deConnecteBeneficiaireAidesService.isBeneficiaireRSA()">
            <div class="row flex-column">
                <label class="label pb-3 headline-4-typo" for="prochaineDeclarationTrimestrielle">
                    * Au cours de quel mois ferez-vous votre prochaine déclaration trimestrielle CAF ?
                    <button id="infobulle-prochaine-declaration-trimestrielle" class="img-interrogation-icon"
                        placement="right" tag-action="clic_infobulle_prochaine_declaration_trimestrielle"
                        aria-label="Où trouver la date de votre prochaine déclaration trimestrielle CAF ?"
                        (click)="modalService.openModalOnEvent($event, modalProchaineDeclarationTrimestrielleTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
                <div class="col">
                    <select id="prochaineDeclarationTrimestrielle" name="prochaineDeclarationTrimestrielle"
                        aria-label="Date de votre prochaine déclaration trimestrielle"
                        data-testid="select-prochaine-declaration-trimestrielle"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesCAF.prochaineDeclarationTrimestrielle"
                        class="fit-content form-select"
                        [ngClass]="{'option-selected':ressourcesFinancieresAvantSimulation.aidesCAF.prochaineDeclarationTrimestrielle !== null}"
                        data-width="auto" required #prochaineDeclarationTrimestrielle="ngModel">
                        <option [value]="null" disabled>
                            Sélectionner
                        </option>
                        <option
                            *ngFor="let moisProchaineDeclarationTrimestrielle of optionsProchaineDeclarationTrimestrielle"
                            [value]="moisProchaineDeclarationTrimestrielle.value">
                            {{ moisProchaineDeclarationTrimestrielle.label }}
                        </option>
                    </select>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || prochaineDeclarationTrimestrielle.touched)  && prochaineDeclarationTrimestrielle.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteBeneficiaireAidesService.isBeneficiairePensionInvalidite()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="pensionInvalidite">
                    * Pension d'invalidité nette imposable perçue
                    <button id="infobulle-pension-invalidite" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_pension_invalidite"
                        aria-label="Où trouver votre montant de pension d'invalidité ?"
                        (click)="modalService.openModalOnEvent($event, modalPensionInvaliditeTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="pensionInvalidite" name="pensionInvalidite"
                        aria-label="Montant de votre pension d'invalidité"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" type="text"
                        maxlength="6" class="max-with-input-type-montant form-control d-inline" placeholder="Montant"
                        data-testid="input-pension-invalidite"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.aidesCPAM.pensionInvalidite"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.aidesCPAM.pensionInvalidite && (this.ressourcesFinancieresAvantSimulation.aidesCPAM.pensionInvalidite == 0)}"
                        required inputmode="numeric" #pensionInvalidite="ngModel">
                    <app-text-with-euro-symbol message="le mois dernier"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || pensionInvalidite?.touched)  && pensionInvalidite?.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || pensionInvalidite?.touched)  && pensionInvalidite?.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_ENTIER}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.aidesCPAM.pensionInvalidite && (this.ressourcesFinancieresAvantSimulation.aidesCPAM.pensionInvalidite == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
            </div>
        </div>
        <div>
            <div class="row pb-3">
                <label class="label headline-4-typo" for="hasTravailleAuCoursDerniersMois">
                    * Avez-vous travaillé en tant que salarié au cours des
                    {{ressourcesFinancieresAvantSimulationUtileService.getNombreMaxMoisTravailleAuCoursDerniersMois()}}
                    derniers mois ?
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-check form-check-inline">
                        <input id="hasTravailleAuCoursDerniersMoisOui" name="hasTravailleAuCoursDerniersMoisOui"
                            attr.aria-label="Vous avez travaillé au cours des {{ressourcesFinancieresAvantSimulationUtileService.getNombreMaxMoisTravailleAuCoursDerniersMois()}} derniers mois"
                            data-testid="btn-has-travaille-au-cours-derniers-mois-oui" type="radio"
                            class="form-check-input"
                            [(ngModel)]="ressourcesFinancieresAvantSimulation.hasTravailleAuCoursDerniersMois"
                            (click)="onClickButtonRadioHasTravailleAuCoursDerniersMois(true)" required [value]="true"
                            #hasTravailleAuCoursDerniersMois="ngModel"
                            tag-action="clic_a_travaille_au_cours_14_derniers_mois_oui"
                            (keyup)="handleKeyUpOnButtonRadioHasTravailleAuCoursDerniersMois($event, true)">
                        <label class="form-check-label body-2-typo" for="hasTravailleAuCoursDerniersMoisOui">
                            oui
                        </label>
                    </div>
                    <div class="form-check form-check-inline ms-2">
                        <input id="hasTravailleAuCoursDerniersMoisNon" name="hasTravailleAuCoursDerniersMoisNon"
                            data-testid="btn-has-travaille-au-cours-derniers-mois-non"
                            attr.aria-label="Vous n'avez pas travaillé au cours des {{ressourcesFinancieresAvantSimulationUtileService.getNombreMaxMoisTravailleAuCoursDerniersMois()}} derniers mois"
                            type="radio" class="form-check-input"
                            [(ngModel)]="ressourcesFinancieresAvantSimulation.hasTravailleAuCoursDerniersMois"
                            [value]="false" (click)="onClickButtonRadioHasTravailleAuCoursDerniersMois(false)" required
                            #hasTravailleAuCoursDerniersMois="ngModel"
                            tag-action="clic_a_travaille_au_cours_14_derniers_mois_non"
                            (keyup)="handleKeyUpOnButtonRadioHasTravailleAuCoursDerniersMois($event, false)">
                        <label class="form-check-label body-2-typo" for="hasTravailleAuCoursDerniersMoisNon">
                            non
                        </label>
                    </div>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted)  && hasTravailleAuCoursDerniersMois.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="isAfficherChampsSalaires();">
            <div>
                <div class="row pb-3">
                    <label class="label headline-4-typo">
                        Indiquez le montant de vos salaires de
                        {{optionsNombreMoisTravailles[optionsNombreMoisTravailles.length-1].label}} à
                        {{optionsNombreMoisTravailles[0].label}}.
                        <br>
                        <span class="body-2-typo">Nécessaire pour calculer vos droits à l'aide au logement.</span>
                    </label>
                </div>
                <div class="row">
                    <div *ngFor="let optionNombreMoisTravailles of optionsNombreMoisTravailles" class="col-12 col-md-4"
                        [ngClass]="{'col-salaire-with-border':optionNombreMoisTravailles.index-12<0, 'mt-3': !screenService.isExtraSmallScreen()}">
                        <div [ngClass]="{'ms-2 me-2':!screenService.isExtraSmallScreen()}">
                            <div class="row pb-3">
                                <label class="label headline-4-typo"
                                    [for]="'salaireMoisMoins'+optionNombreMoisTravailles.index+'AvantSimulation'">
                                    * Salaire en {{ optionNombreMoisTravailles.label }}
                                </label>
                            </div>
                            <div class="row pb-3">
                                <div class="col">
                                    <input [id]="'salaireMoisMoins'+optionNombreMoisTravailles.index+'AvantSimulation'"
                                        [name]="'salaireMoisMoins'+optionNombreMoisTravailles.index+'AvantSimulation'"
                                        attr.aria-label="Montant de votre salaire net perçu en {{ optionNombreMoisTravailles.label }}"
                                        attr.data-testid="input-salaire-mois-moins-{{optionNombreMoisTravailles.index}}-avant-simulation"
                                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                                        (change)="checkChangePensionInvaliditeEtSalaire(ressourcesFinancieresAvantSimulation.periodeTravailleeAvantSimulation.mois[optionNombreMoisTravailles.index].salaire.montantMensuelNet)"
                                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)"
                                        type="text" maxlength="6" min="0"
                                        class="max-with-input-type-montant form-control d-inline" placeholder="Montant"
                                        (blur)="this.ressourcesFinancieresAvantSimulationUtileService.calculSalaireMensuelBrut(ressourcesFinancieresAvantSimulation.periodeTravailleeAvantSimulation.mois[optionNombreMoisTravailles.index].salaire);"
                                        [(ngModel)]="ressourcesFinancieresAvantSimulation.periodeTravailleeAvantSimulation.mois[optionNombreMoisTravailles.index].salaire.montantMensuelNet"
                                        [ngClass]="{'ng-invalid': hasQuatorzeMoisSansSalaire()}" required
                                        inputmode="numeric" (click)="$event.target.select()"
                                        #salaireMoisAvantPeriodeSimulee="ngModel">
                                    <app-text-with-euro-symbol message="net"></app-text-with-euro-symbol>
                                </div>
                            </div>
                            <div class="row">
                                <span class="row error-input-message"
                                    *ngIf="(isRessourcesFinancieresFormSubmitted || salaireMoisAvantPeriodeSimulee?.touched)  && salaireMoisAvantPeriodeSimulee?.errors?.pattern">
                                    {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_ENTIER}}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row pb-3">
                    <div class="col-12">
                        <span class="error-input-message" role="alert"
                            *ngIf="(isRessourcesFinancieresFormSubmitted)  && erreurSaisieSalaires">
                            Vous avez déclaré avoir travaillé lors de ces
                            {{ressourcesFinancieresAvantSimulationUtileService.getNombreMaxMoisTravailleAuCoursDerniersMois()}}
                            derniers mois. Veuillez renseigner au moins un salaire.
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteInfosPersonnellesService.isMicroEntrepreneur()">
            <div class="row pb-3">
                <label class="label headline-4-typo">
                    Type de bénéfices
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <button id="btn-types-benefices-bic" #BIC="ngModel" (click)="onClickCheckBoxIsBIC($event)"
                        name="BIC" aria-label="Vous percevez des bénéfices de type BIC" aria-required="true"
                        [attr.aria-invalid]="(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)"
                        [ngClass]="{'ms-1':!screenService.isExtraSmallScreen(), 'ng-invalid':(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)}"
                        class="radio-button-style-1" data-testid="btn-types-benefices-bic" btnCheckbox tabindex="0"
                        [(ngModel)]="isBIC" (keyup)="handleKeyUpOnButtonIsBIC($event)">
                        <span class="body-2-typo">{{libellesTypesBeneficesEnum.BIC}}</span>
                    </button>
                    <button id="btn-types-benefices-bnc" #BNC="ngModel" (click)="onClickCheckBoxIsBNC($event)"
                        name="BNC" aria-label="Vous percevez des bénéfices de type BNC" aria-required="true"
                        [attr.aria-invalid]="(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)"
                        [ngClass]="{'ms-1':!screenService.isExtraSmallScreen(), 'ng-invalid':(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)}"
                        class="radio-button-style-1" data-testid="btn-types-benefices-bnc" btnCheckbox tabindex="0"
                        [(ngModel)]="isBNC" (keyup)="handleKeyUpOnButtonIsBNC($event)">
                        <span class="body-2-typo">{{libellesTypesBeneficesEnum.BNC}}</span>
                    </button>
                    <button id="btn-types-benefices-ar" #AR="ngModel" (click)="onClickCheckBoxIsAR($event)" name="AR"
                        aria-label="Vous percevez des bénéfices de type AR" aria-required="true"
                        [attr.aria-invalid]="(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)"
                        [ngClass]="{'ms-1':!screenService.isExtraSmallScreen(), 'ng-invalid':(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)}"
                        class="radio-button-style-1" data-testid="btn-types-benefices-ar" btnCheckbox tabindex="0"
                        [(ngModel)]="isAR" (keyup)="handleKeyUpOnButtonIsAR($event)">
                        <span class="body-2-typo">{{libellesTypesBeneficesEnum.AR}}</span>
                    </button>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted) && (!isBIC && !isBNC && !isAR)">
                        {{controleChampFormulaireService.MESSAGE_SELECTION_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div
            *ngIf="deConnecteInfosPersonnellesService.isMicroEntrepreneur() && isDateCreationRepriseEntrepriseAvantNMoins2()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="chiffreAffairesMicroEntrepriseNMoins2">
                    * Chiffre d’affaires réalisé en {{dateUtileService.getLibelleAnneeDepuisXAnnee(2)}} (hors taxes)
                    <button id="infobulle-chiffre-affaires-n-moins-2" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_chiffre_affaires_n_moins_2"
                        aria-label="Comment renseigner votre chiffre d'affaires ?"
                        (click)="modalService.openModalOnEvent($event, modalChiffreAffairesTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="chiffreAffairesMicroEntrepriseNMoins2" name="chiffreAffairesMicroEntrepriseNMoins2"
                        attr.aria-label="Montant du chiffre d'affaires de votre micro entreprise en {{dateUtileService.getLibelleAnneeDepuisXAnnee(2)}}"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" type="text"
                        maxlength="6" min="0" class="max-with-input-type-montant form-control d-inline"
                        data-testid="input-chiffre-affaires-micro-entreprise-n-moins-2" placeholder="Montant"
                        [(ngModel)]="informationsPersonnelles.microEntreprise.chiffreAffairesNMoins2"
                        [ngClass]="{'ng-invalid': this.informationsPersonnelles.microEntreprise.chiffreAffairesNMoins2 && (this.informationsPersonnelles.microEntreprise.chiffreAffairesNMoins2 == 0)}"
                        required inputmode="numeric" #chiffreAffairesMicroEntrepriseNMoins2="ngModel">
                    <app-text-with-euro-symbol></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted)
                        || (chiffreAffairesMicroEntrepriseNMoins2?.touched  && chiffreAffairesMicroEntrepriseNMoins2?.errors?.required)">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div
            *ngIf="deConnecteInfosPersonnellesService.isMicroEntrepreneur() && isDateCreationRepriseEntrepriseAvantNMoins1()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="chiffreAffairesMicroEntrepriseNMoins1">
                    * Chiffre d’affaires réalisé en {{dateUtileService.getLibelleAnneeDepuisXAnnee(1)}} (hors taxes)
                    <button id="infobulle-chiffre-affaires-n-moins-1" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_chiffre_affaires_n_moins_1"
                        aria-label="Comment renseigner votre chiffre d'affaires ?"
                        (click)="modalService.openModalOnEvent($event, modalChiffreAffairesTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="chiffreAffairesMicroEntrepriseNMoins1" name="chiffreAffairesMicroEntrepriseNMoins1"
                        attr.aria-label="Montant du chiffre d'affaires de votre micro entreprise en {{dateUtileService.getLibelleAnneeDepuisXAnnee(1)}}"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" type="text"
                        maxlength="6" min="0" class="max-with-input-type-montant form-control d-inline"
                        data-testid="input-chiffre-affaires-micro-entreprise-n-moins-1" placeholder="Montant"
                        [(ngModel)]="informationsPersonnelles.microEntreprise.chiffreAffairesNMoins1"
                        [ngClass]="{'ng-invalid': this.informationsPersonnelles.microEntreprise.chiffreAffairesNMoins1 && (this.informationsPersonnelles.microEntreprise.chiffreAffairesNMoins1 == 0)}"
                        required inputmode="numeric" #chiffreAffairesMicroEntrepriseNMoins1="ngModel">
                    <app-text-with-euro-symbol></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted)
                    || (chiffreAffairesMicroEntrepriseNMoins1?.touched  && chiffreAffairesMicroEntrepriseNMoins1?.errors?.required)">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteInfosPersonnellesService.isMicroEntrepreneur()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="chiffreAffairesMicroEntreprise">
                    * Chiffre d’affaires estimé pour l’année {{dateUtileService.getAnneeActuelle()}} (hors taxes)
                    <button id="infobulle-chiffre-affaires-n" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_chiffre_affaires"
                        aria-label="Comment renseigner votre chiffre d'affaires ?"
                        (click)="modalService.openModalOnEvent($event, modalChiffreAffairesTemplate)">
                        <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                    </button>
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="chiffreAffairesMicroEntrepriseN" name="chiffreAffairesMicroEntreprise"
                        attr.aria-label="Montant du chiffre d'affaires de votre micro entreprise en {{dateUtileService.getAnneeActuelle()}}"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" type="text"
                        maxlength="6" min="0" class="max-with-input-type-montant form-control d-inline"
                        data-testid="input-chiffre-affaires-micro-entreprise-n" placeholder="Montant"
                        [(ngModel)]="informationsPersonnelles.microEntreprise.chiffreAffairesN"
                        [ngClass]="{'ng-invalid': this.informationsPersonnelles.microEntreprise.chiffreAffairesN && (this.informationsPersonnelles.microEntreprise.chiffreAffairesN == 0)}"
                        required inputmode="numeric" #chiffreAffairesMicroEntrepriseN="ngModel">
                    <app-text-with-euro-symbol></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="((isRessourcesFinancieresFormSubmitted || chiffreAffairesMicroEntrepriseN?.touched) && chiffreAffairesMicroEntrepriseN?.errors?.required)">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
            </div>
        </div>
        <div *ngIf="deConnecteInfosPersonnellesService.hasRevenusImmobilier()">
            <div class="row pb-3">
                <label class="label headline-4-typo" for="revenusImmobilierFoyer">
                    * Revenus annuels de placement ou du patrimoine
                    <button id="infobulle-revenus-immobilier" class="img-interrogation-icon" placement="right"
                        tag-action="clic_infobulle_ressources_du_foyer_revenus_annuels_placement_patrimoine"
                        aria-label="où trouver vos revenus immobiliers ?"
                        (click)="modalService.openModalOnEvent($event, modalRevenusImmobiliersTemplate)"></button>
                    <img alt="" role="presentation" src="./assets/images/icones/question.svg">
                </label>
            </div>
            <div class="row">
                <div class="col">
                    <input id="revenusImmobilier" name="revenusImmobilier"
                        aria-label="Montant de vos revenus immobiliers"
                        pattern="{{controleChampFormulaireService.REGEX_NUMERIC}}"
                        (keypress)="controleChampFormulaireService.isKeyAuthorizeForNumberOnly($event)" type="text"
                        maxlength="6" min="0" class="max-with-input-type-montant form-control d-inline"
                        placeholder="Montant"
                        [(ngModel)]="ressourcesFinancieresAvantSimulation.revenusImmobilier3DerniersMois"
                        [ngClass]="{'ng-invalid': this.ressourcesFinancieresAvantSimulation.revenusImmobilier3DerniersMois && (this.ressourcesFinancieresAvantSimulation.revenusImmobilier3DerniersMois == 0)}"
                        required inputmode="numeric" #revenusImmobilier="ngModel">
                    <app-text-with-euro-symbol message="net total 3 derniers mois"></app-text-with-euro-symbol>
                </div>
            </div>
            <div class="row pb-3">
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || revenusImmobilier?.touched)  && revenusImmobilier?.errors?.required">
                        {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="(isRessourcesFinancieresFormSubmitted || revenusImmobilier?.touched)  && revenusImmobilier?.errors?.pattern">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_ERREUR_ENTIER}}
                    </span>
                </div>
                <div class="col-12">
                    <span class="error-input-message" role="alert"
                        *ngIf="this.ressourcesFinancieresAvantSimulation.revenusImmobilier3DerniersMois && (this.ressourcesFinancieresAvantSimulation.revenusImmobilier3DerniersMois == 0)">
                        {{controleChampFormulaireService.MESSAGE_MONTANT_0}}
                    </span>
                </div>
            </div>
        </div>
    </form>
    <div class="row row-button-valider">
        <div class="col">
            <button id="btn-vos-ressources-valider" class="btn-style-perso-3 button-typo"
                aria-label="Valider votre saisie" data-testid="btn-vos-ressources-valider"
                (click)="onSubmitRessourcesFinancieresForm(vosRessourcesFinancieresForm)"
                tag-action="clic_bouton_valider_vos_ressources">
                <div>
                    <span>Valider</span>
                </div>
            </button>
        </div>
    </div>
</div>

<ng-template #modalAllocationASSTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur votre dernière attestation de période indemnisée Pôle emploi 👇
        </p>
        <div class='row mb-5'>
            <img alt='' role='presentation' src='./assets/images/exemples/attestation-ass.png'>
        </div>">
    </app-tooltip>
</ng-template>

<ng-template #modalDateOuvertureASSTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur votre notification d'admission à l'ASS 👇
        </p>
        <div class='row mb-5'>
            <img alt='' role='presentation' src='./assets/images/exemples/ouverture-droit-ass.png'>
        </div>">
    </app-tooltip>
</ng-template>

<ng-template #modalAllocationARETemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur la page 2 de votre dernier relevé de situation Pôle emploi 👇
        </p>
        <div class='row mb-5'>
            <img alt='' role='presentation' src='./assets/images/exemples/releve-are.png'>
        </div>
        <h4 class='headline-4-typo headline-4-typo-color'>
            Où trouver votre dernier relevé de situation ARE ?
        </h4>
        <h5 class='headline-5-typo headline-5-typo-color'>
            Sur Internet :
        </h5>
        <ol>
            <li class='body-1-typo'>
                Rendez-vous votre espace personnel Pôle emploi, dans la rubrique <i>“Mes courriers reçus” </i> <a href='https://courriers.pole-emploi.fr/courriersweb/mescourriers' target='_blank'>en cliquant ici</a>
            </li>
            <li class='body-1-typo'>
                Dans la liste des courriers reçus vous trouverez vos notifications ARE
            </li>
            <li class='body-1-typo'>
                Choisissez le relevé de situation le plus récent et cliquez sur <i>“Télécharger”</i>
            </li>
        </ol>
        <h5 class='headline-5-typo headline-5-typo-color'>
            Sur l'application mobile <i>“Mon Espace”</i> de Pôle emploi :
        </h5>
        <ol>
            <li class='body-1-typo'>
                Ouvrez l'application et connectez-vous si nécessaire
            </li>
            <li class='body-1-typo'>
                Accédez à vos courriers depuis la barre de menu en bas de l'écran
            </li>
            <li class='body-1-typo'>
                Dans la liste, identifiez le relevé de situation le plus récent et ouvrez-le
            </li>
        </ol>">
    </app-tooltip>
</ng-template>

<ng-template #modalTauxReduitTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <p class='body-1-typo'>
            Cette information est présente sur votre premier relevé de situation tenant compte de la dégressivité, si vous n'avez pas cette information, veuillez vous connecter à votre espace personnel
        </p>">
    </app-tooltip>
</ng-template>

<ng-template #modalDegressiviteTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <p class='body-1-typo'>
            La dégressivité est une réduction de l'allocation chômage appliquée aux demandeurs d'emploi qui avaient moins de 57 ans au moment de leur fin de contrat et dont les revenus excédaient un certain montant <a href='http://plmpl.fr/c/pXKCb'>(plus d'infos)</a>
        </p>">
    </app-tooltip>
</ng-template>

<ng-template #modalChiffreAffairesTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <p class='body-1-typo'>
            Le chiffre d'affaires est la somme des ventes de biens ou de services d'une entreprise. Il est égal au montant (hors taxes) de l'ensemble des transactions réalisées par l'entreprise
        </p>">
    </app-tooltip>
</ng-template>

<ng-template #modalPensionInvaliditeTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur votre dernière attestation de paiement de pension 👇
        </p>
        <div class='row mb-5'>
            <img alt='' role='presentation' src='./assets/images/exemples/attestation-pi.png'>
        </div>">
    </app-tooltip>
</ng-template>

<ng-template #modalMontantRSATemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur votre dernière attestation de paiement CAF 👇
        </p>
        <div class='row mb-5'>
            <img alt='' role='presentation' src='./assets/images/exemples/attestation-rsa.png'>
        </div>">
    </app-tooltip>
</ng-template>

<ng-template #modalMontantAAHTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur votre dernière attestation de paiement CAF 👇
        </p>
        <div class='row mb-5'>
            <img alt='' role='presentation' src='./assets/images/exemples/attestation-aah.png'>
        </div>">
    </app-tooltip>
</ng-template>

<ng-template #modalProchaineDeclarationTrimestrielleTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Où trouver cette information ?
        </h3>
        <p class='body-1-typo'>
            Sur votre espace CAF, dans la rubrique “mon agenda”
        </p>">
    </app-tooltip>
</ng-template>

<ng-template #modalRevenusImmobiliersTemplate>
    <app-tooltip [modalRef]="modalService.modalRef" htmlData="
        <h3 class='headline-3-typo headline-3-typo-color'>
            Retrouvez cette information sur le dernier avis d'imposition sur le revenu :
        </h3>
        <p class='body-1-typo'>
            * revenus fonciers ou micro-fonciers
            <br>
            * revenus des capitaux (actions, obligations)
            <br>
            * bénéfices d'une rente viagère
        </p>">
    </app-tooltip>
</ng-template>