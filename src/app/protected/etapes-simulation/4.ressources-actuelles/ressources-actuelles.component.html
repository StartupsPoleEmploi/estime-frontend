<app-page-loading *ngIf="isPageLoadingDisplay" message="Calcul de votre simulation en cours..."></app-page-loading>
<app-fil-etapes-desktop *ngIf="!screenService.isExtraSmallScreen()"></app-fil-etapes-desktop>
<app-fil-etapes-mobile *ngIf="screenService.isExtraSmallScreen()"></app-fil-etapes-mobile>
<div class="container-fluid form-container-fluid">
    <alert type="danger" *ngIf="messageErreur">
        {{messageErreur}}
    </alert>
    <div class="div-title-formulaire">
        <h1 class="h1-style-1 headline-1-typo">
            4. {{pageTitlesEnum.MES_RESSOURCES_ACTUELLES}}
        </h1>
        <div class="text-under-h1 body-2-typo">
            {{controleChampFormulaireService.MESSAGE_CHAMP_OBLIGATOIRE_ASTERIX}}
        </div>
    </div>
    <div class="block-ressources">
        <div id="block-vos-ressources">
            <button type="button" role="button" class="btn accordion-btn" (click)="onClickButtonVosRessources()">
                <div class="container-fluid container-fluid-button">
                    <div class="row">
                        <div class="col-2 col-md-1 col-euro-sign">
                            <img alt="" class="euro-sign" src="./assets/images/euro.svg">
                        </div>
                        <div class="col-9 col-md-10 col-text-button headline-4-typo">
                            <div class="text-button">Vos ressources</div>
                            <div *ngIf="!isVosRessourcesDisplay">Total : {{montantVosRessources}} €</div>
                        </div>
                        <div class="col-1 col-md-1 col-chevron">
                            <div>
                                <i *ngIf="isVosRessourcesDisplay"
                                    class="fas fa-chevron-up mt-auto mb-auto me-4 ms-auto"></i>
                                <i *ngIf="!isVosRessourcesDisplay"
                                    class="fas fa-chevron-down mt-auto mb-auto me-4 ms-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </button>
            <app-vos-ressources-financieres [hidden]="!isVosRessourcesDisplay"
                [ressourcesFinancieres]="ressourcesFinancieres"
                (validationVosRessourcesEventEmitter)="traiterValidationVosRessourcesEventEmitter()">
            </app-vos-ressources-financieres>
        </div>
        <div *ngIf="deConnecteSituationFamilialeService.hasConjoint()
            && !ressourceConjointSeulementRSA" id="block-ressources-conjoint">
            <button type="button" role="button" aria-describedby="label-vos-ressources"
                aria-label="Vos ressources en Euros" class="btn accordion-btn"
                (click)="onClickButtonRessourcesConjoint()">
                <div class="container-fluid container-fluid-button">
                    <div class="row">
                        <div class="col-2 col-md-1 col-euro-sign">
                            <img alt="" class="euro-sign" src="./assets/images/euro.svg">
                        </div>
                        <div class="col-9 col-md-10 col-text-button headline-4-typo">
                            <div id="label-vos-ressources" class="text-button">
                                Ressources conjoint(e)
                            </div>
                            <div *ngIf="!isRessourcesConjointDisplay">Total : {{montantRessourcesConjoint}} €</div>
                        </div>
                        <div class="col-1 col-md-1 col-chevron">
                            <div>
                                <i *ngIf="isRessourcesConjointDisplay"
                                    class="fas fa-chevron-up mt-auto mb-auto me-4 ms-auto"></i>
                                <i *ngIf="!isRessourcesConjointDisplay"
                                    class="fas fa-chevron-down mt-auto mb-auto me-4 ms-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </button>
            <app-ressources-financieres-conjoint [hidden]="!isRessourcesConjointDisplay"
                (validationRessourcesConjointEventEmitter)="traiterValidationRessourcesFinancieresConjointEventEmitter()">

            </app-ressources-financieres-conjoint>
        </div>
        <div *ngIf="deConnecteSituationFamilialeService.hasPersonneAChargeAgeLegal()
            && !ressourcePersonnesAChargeSeulementRSA" id="block-ressources-personnes-a-charge">
            <button type="button" role="button" aria-describedby="label-ressources-conjoint"
                aria-label="Vos ressources en Euros" class="btn accordion-btn"
                (click)="onClickButtonRessourcesPersonnesCharge()">
                <div class="container-fluid container-fluid-button">
                    <div class="row">
                        <div class="col-2 col-md-1 col-euro-sign">
                            <img alt="" class="euro-sign" src="./assets/images/euro.svg">
                        </div>
                        <div class="col-9 col-md-10 col-text-button headline-4-typo">
                            <div id="label-ressources-conjoint" class="text-button">
                                Ressources personne(s) à charge
                            </div>
                            <div *ngIf="!isRessourcesPersonnesChargeDisplay">
                                Total : {{montantRessourcesPersonnesCharge}} €
                            </div>
                        </div>
                        <div class="col-1 col-md-1 col-chevron">
                            <div>
                                <i *ngIf="isRessourcesPersonnesChargeDisplay"
                                    class="fas fa-chevron-up mt-auto mb-auto me-4 ms-auto"></i>
                                <i *ngIf="!isRessourcesPersonnesChargeDisplay"
                                    class="fas fa-chevron-down mt-auto mb-auto me-4 ms-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </button>
            <app-ressources-financieres-personnes-a-charge [hidden]="!isRessourcesPersonnesChargeDisplay"
                (validationRessourcesPersonnesAChargeEventEmitter)="traiterValidationRessourcesFinancieresPersonnesChargeEventEmitter()">
            </app-ressources-financieres-personnes-a-charge>
        </div>
        <div id="block-ressources-foyer">
            <button type="button" role="button" class="btn accordion-btn" aria-describedby="label-ressources-foyer"
                aria-label="Vos ressources en Euros" (click)="onClickButtonRessourcesFoyer()">
                <div class="container-fluid container-fluid-button">
                    <div class="row">
                        <div class="col-2 col-md-1 col-euro-sign">
                            <img alt="" class="euro-sign" src="./assets/images/euro.svg">
                        </div>
                        <div class="col-9 col-md-10 col-text-button headline-4-typo">
                            <div id="label-ressources-foyer" class="text-button">
                                Ressources du foyer
                            </div>
                            <div *ngIf="!isRessourcesFoyerDisplay">Total : {{montantRessourcesFoyer}} €</div>
                        </div>
                        <div class="col-1 col-md-1 col-chevron">
                            <div>
                                <i *ngIf="isRessourcesFoyerDisplay"
                                    class="fas fa-chevron-up mt-auto mb-auto me-4 ms-auto"></i>
                                <i *ngIf="!isRessourcesFoyerDisplay"
                                    class="fas fa-chevron-down mt-auto mb-auto me-4 ms-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </button>
            <app-ressources-financieres-foyer [hidden]="!isRessourcesFoyerDisplay"
                [ressourcesFinancieres]="ressourcesFinancieres"
                (validationRessourcesFoyerEventEmitter)="traiterValidationRessourcesFinancieresFoyerEventEmitter()">
            </app-ressources-financieres-foyer>
        </div>
    </div>
    <div class="div-buttons-form row d-flex justify-content-center">
        <div class="col" *ngIf="!screenService.isExtraSmallScreen()">
            <button class="btn-style-perso-2 first-btn button-typo d-inline float-end"
                aria-label="Retour à la page précédente" (click)="onClickButtonRetour()"
                tag-navigation="clic_bouton_retour">
                <div>
                    <img alt="" src="./assets/images/return-arrow-v2.svg">
                    <span>Retour</span>
                </div>
            </button>
        </div>
        <div class="col" [ngClass]="{'text-center col-12': this.screenService.isExtraSmallScreen()}">
            <button id="btn-obtenir-simulation" aria-label="Obtenir ma simulation"
                class="btn-homepage d-flex justify-content-center button-typo d-inline"
                data-testid="btn-obtenir-simulation" (click)="onClickButtonObtenirSimulation()"
                tag-action="clic_bouton_obtenir_ma_simulation">
                <span>Obtenir ma simulation</span>
                <img alt="" src="./assets/images/icon-bt-primaire.svg">
            </button>
        </div>
        <div class="col" *ngIf="this.screenService.isExtraSmallScreen()" class="text-center col-12">
            <button class="btn-style-perso-2 first-btn button-typo" aria-label="Retour à la page précédente"
                (click)="onClickButtonRetour()" tag-navigation="clic_bouton_retour">
                <div>
                    <img alt="" src="./assets/images/return-arrow-v2.svg">
                    <span>Retour</span>
                </div>
            </button>
        </div>
    </div>
</div>